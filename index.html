<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WACO TOOL OVERHANG CALCULATOR</title>

  <!-- Manifest link -->
  <link rel="manifest" href="manifest.json">

  <!-- Theme color -->
  <meta name="theme-color" content="#7DA27D">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Rajdhani:wght@500&display=swap');
    /* same CSS as before... */
  </style>
</head>
<body>

<div class="container">
  <h2>WACO TOOL OVERHANG CALCULATOR</h2>

  <!-- Important Notes -->
  <div class="notes">
    <p><b><i>1. ALWAYS USE WITH ATTACHMENT NO. 1 AND 3</i></b></p>
    <p><b><i>2. THIS IS THEORETICAL ONLY. ALWAYS CHECK PHYSICALLY</i></b></p>
  </div>

  <div class="input-group">
    <label for="safeDia">Safe Dia Value:</label>
    <input type="number" id="safeDia" placeholder="e.g. 750" step="0.1">
  </div>
  <div class="input-group">
    <label for="endDia">End Dia Value:</label>
    <input type="number" id="endDia" placeholder="e.g. 800.5" step="0.1">
  </div>
  <button onclick="calculate()">CALCULATE</button>
  <p id="result">Result will appear here</p>

  <!-- Credits Line -->
  <p class="credits">
    credits to basic formula - nitin kumar | digitaly convert - raj shekhar | looks and apperance - prem
  </p>
</div>

<script>
  function calculate() {
    let safeDia = parseFloat(document.getElementById('safeDia').value);
    let endDia = parseFloat(document.getElementById('endDia').value);
    let resultElement = document.getElementById('result');

    resultElement.style.color = "#333";

    if (isNaN(safeDia) || isNaN(endDia)) {
      resultElement.textContent = "ERROR: PLEASE ENTER VALID NUMBERS.";
      resultElement.style.color = "red";
      return;
    }
    if (safeDia < 636) {
      resultElement.textContent = "ERROR: SAFE DIA MUST BE AT LEAST 636.";
      resultElement.style.color = "red";
      return;
    }
    if (endDia <= safeDia) {
      resultElement.textContent = "ERROR: END DIA MUST BE GREATER THAN SAFE DIA.";
      resultElement.style.color = "red";
      return;
    }

    let a = safeDia / 2;
    let a_squared = a * a;
    let result_minus_constant = a_squared - 50625;

    if (result_minus_constant < 0) {
      resultElement.textContent = "ERROR: INVALID SAFE DIA CALCULATION.";
      resultElement.style.color = "red";
      return;
    }

    let squareRootResult = Math.sqrt(result_minus_constant);
    let finalCalculation = a - squareRootResult;

    let endHalf = endDia / 2;
    let safeHalf = safeDia / 2;
    let subtractionResult = endHalf - safeHalf;

    let grandTotal = finalCalculation + subtractionResult;

    if (grandTotal < 0) {
      resultElement.textContent = "ERROR: PLEASE INPUT CORRECT SAFE DIA AND END DIA.";
      resultElement.style.color = "red";
    } else {
      resultElement.textContent = "TOTAL TOOL OVERHANG INCLUDING CASSATE: " + grandTotal.toFixed(2);
      resultElement.style.color = "green";
    }
  }

  // âœ… Register Service Worker
  if ("serviceWorker" in navigator) {
    window.addEventListener("load", function() {
      navigator.serviceWorker.register("service-worker.js")
        .then(reg => console.log("Service Worker Registered", reg))
        .catch(err => console.log("SW registration failed", err));
    });
  }
</script>

</body>
</html>
